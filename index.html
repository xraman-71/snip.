<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snip â€” Modern Link Shortener</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary:      #1a1a1a;
      --primary-h:    #000000;
      --bg:           #FFFFFF;
      --bg-soft:      #F5F5F0;
      --border-main:  #2d2d2d;
      --border-light: #DDDDD8;
      --text:         #111111;
      --text-sub:     #3a3a3a;
      --text-muted:   #7a7a72;
      --font-body: 'Poppins', sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
      --radius: 14px;
      --transition: 0.22s ease;
      --side-pad: clamp(32px, 9vw, 128px);
      --section-v: clamp(96px, 12vw, 160px);
      --max-w: 1280px;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body { font-family: var(--font-body); background: var(--bg); color: var(--text); line-height: 1.6; min-height: 100vh; }

    /* â”€â”€ REDIRECT OVERLAY â”€â”€ */
    #redirect-overlay {
      display: none; position: fixed; inset: 0; z-index: 9999;
      background: var(--bg); flex-direction: column;
      align-items: center; justify-content: center;
      gap: 28px; padding: 40px; text-align: center;
    }
    #redirect-overlay.active { display: flex; }
    .redir-logo { font-family: var(--font-mono); font-weight: 700; font-size: 1.6rem; letter-spacing: -0.5px; color: var(--primary); }
    .redir-logo span { color: var(--text-muted); }
    .redir-msg { font-size: 1rem; color: var(--text-muted); max-width: 420px; line-height: 1.75; }
    .redir-dest { font-family: var(--font-mono); font-size: 0.8rem; color: var(--text-muted); background: var(--bg-soft); border: 1px solid var(--border-light); padding: 10px 18px; border-radius: 8px; max-width: 480px; word-break: break-all; display: none; }
    .redir-dest.show { display: block; }
    .redir-bar { width: 40px; height: 2px; background: var(--primary); border-radius: 2px; animation: barPulse 1s ease infinite alternate; }
    @keyframes barPulse { from { width: 24px; opacity: 0.3; } to { width: 64px; opacity: 1; } }

    /* â”€â”€ HEADER â”€â”€ */
    header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(255,255,255,0.94); backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border-light);
    }
    .nav-inner {
      max-width: var(--max-w); margin: 0 auto; padding: 0 var(--side-pad);
      height: 72px; display: grid; grid-template-columns: 1fr auto 1fr; align-items: center;
    }
    .nav-logo { font-family: var(--font-mono); font-weight: 700; font-size: 1.25rem; color: var(--primary); text-decoration: none; letter-spacing: -0.5px; }
    .nav-logo span { color: var(--text-muted); }
    .nav-links { display: flex; gap: 2px; align-items: center; justify-content: center; }
    .nav-links a {
      font-size: 0.83rem; font-weight: 500; color: var(--text-muted);
      text-decoration: none; padding: 8px 18px; border-radius: 10px;
      transition: background var(--transition), color var(--transition); letter-spacing: 0.01em;
    }
    .nav-links a:hover { background: var(--bg-soft); color: var(--primary); }
    .nav-right { display: flex; justify-content: flex-end; }

    /* â”€â”€ HERO â”€â”€ */
    .hero-wrap {
      max-width: var(--max-w); margin: 0 auto;
      padding: clamp(88px, 12vw, 152px) var(--side-pad) clamp(80px, 10vw, 128px);
      text-align: center;
    }
    .hero-badge {
      display: inline-flex; align-items: center; gap: 8px;
      font-family: var(--font-mono); font-size: 0.7rem; font-weight: 500;
      color: var(--text-muted); background: var(--bg-soft);
      border: 1px solid var(--border-light); padding: 6px 18px;
      border-radius: 100px; margin-bottom: 44px; letter-spacing: 0.07em; text-transform: uppercase;
    }
    .hero-badge::before { content: ''; width: 6px; height: 6px; background: var(--primary); border-radius: 50%; }
    .hero-h1 { font-size: clamp(2.8rem, 5.5vw, 4.4rem); font-weight: 700; line-height: 1.1; letter-spacing: -0.035em; color: var(--primary); margin-bottom: 26px; }
    .hero-h1 em { font-style: normal; color: var(--text-muted); }
    .hero-sub { font-size: 1.1rem; color: var(--text-muted); max-width: 520px; margin: 0 auto 72px; font-weight: 400; line-height: 1.75; }

    /* â”€â”€ SHORTENER BOX â”€â”€ */
    .shortener-wrap { max-width: 700px; margin: 0 auto; }
    .shortener-box { background: var(--bg-soft); border: 1px solid var(--border-light); border-radius: 22px; padding: 40px 44px; }
    .input-row { display: flex; gap: 12px; flex-wrap: wrap; }
    .url-input {
      flex: 1; min-width: 200px; font-family: var(--font-mono); font-size: 0.88rem;
      padding: 17px 24px; border: 1.5px solid var(--border-light); border-radius: var(--radius);
      background: var(--bg); color: var(--text); outline: none;
      transition: border-color var(--transition), box-shadow var(--transition);
    }
    .url-input:focus { border-color: var(--border-main); box-shadow: 0 0 0 3px rgba(26,26,26,0.07); }
    .url-input::placeholder { color: var(--text-muted); }
    .btn-primary {
      font-family: var(--font-body); font-size: 0.88rem; font-weight: 600;
      padding: 17px 34px; background: var(--primary); color: #fff;
      border: none; border-radius: var(--radius); cursor: pointer; white-space: nowrap;
      transition: background var(--transition), transform var(--transition), box-shadow var(--transition);
    }
    .btn-primary:hover { background: var(--primary-h); transform: translateY(-1px); box-shadow: 0 8px 24px rgba(0,0,0,0.18); }
    .btn-primary:active { transform: translateY(0); box-shadow: none; }
    .result-area { margin-top: 20px; display: none; animation: fadeUp 0.3s ease; }
    .result-area.show { display: block; }
    @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .result-row {
      display: flex; align-items: center; gap: 12px;
      background: var(--bg); border: 1.5px solid var(--border-light);
      border-radius: var(--radius); padding: 14px 20px;
    }
    .result-link { font-family: var(--font-mono); font-size: 0.82rem; color: var(--primary); text-decoration: none; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .btn-copy { font-family: var(--font-body); font-size: 0.8rem; font-weight: 600; padding: 9px 22px; background: var(--primary); color: #fff; border: none; border-radius: 9px; cursor: pointer; flex-shrink: 0; transition: background var(--transition); }
    .btn-copy:hover { background: var(--primary-h); }
    .btn-copy.copied { background: #2a7a4b; }
    .error-msg { color: #b83232; font-size: 0.82rem; margin-top: 12px; display: none; }
    .error-msg.show { display: block; }

    /* â”€â”€ STATS â”€â”€ */
    .stats-outer { border-top: 1px solid var(--border-light); border-bottom: 1px solid var(--border-light); }
    .stats-bar {
      max-width: var(--max-w); margin: 0 auto;
      padding: clamp(56px, 7vw, 96px) var(--side-pad);
      display: flex; justify-content: center; gap: clamp(48px, 9vw, 140px); flex-wrap: wrap;
    }
    .stat { text-align: center; }
    .stat-num { font-family: var(--font-mono); font-size: clamp(1.9rem, 3.5vw, 2.8rem); font-weight: 700; color: var(--primary); letter-spacing: -0.04em; display: block; margin-bottom: 8px; }
    .stat-label { font-size: 0.72rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.12em; }

    /* â”€â”€ SECTION SHELL â”€â”€ */
    .section-shell { max-width: var(--max-w); margin: 0 auto; padding: var(--section-v) var(--side-pad); }
    .section-tag { font-family: var(--font-mono); font-size: 0.67rem; font-weight: 500; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 22px; display: block; }
    .section-title { font-size: clamp(1.9rem, 3.8vw, 3rem); font-weight: 700; letter-spacing: -0.03em; color: var(--primary); line-height: 1.12; margin-bottom: 20px; }
    .section-sub { font-size: 1rem; color: var(--text-muted); max-width: 480px; margin-bottom: 72px; line-height: 1.8; }

    /* â”€â”€ FEATURES â”€â”€ */
    #features { background: var(--bg-soft); }
    .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(268px, 1fr)); gap: 24px; }
    .feature-card { background: var(--bg); border: 1px solid var(--border-light); border-radius: 20px; padding: 40px 36px; transition: border-color var(--transition), transform var(--transition), box-shadow var(--transition); }
    .feature-card:hover { border-color: #c4c4be; transform: translateY(-4px); box-shadow: 0 14px 44px rgba(0,0,0,0.06); }
    .feature-icon { font-size: 1.5rem; margin-bottom: 22px; display: block; }
    .feature-name { font-size: 1rem; font-weight: 600; color: var(--primary); margin-bottom: 10px; }
    .feature-desc { font-size: 0.88rem; color: var(--text-muted); line-height: 1.75; }

    /* â”€â”€ STEPS â”€â”€ */
    .steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); gap: 64px 56px; }
    .step-num { font-family: var(--font-mono); font-size: 0.65rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.15em; margin-bottom: 16px; display: block; }
    .step-title { font-size: 1.05rem; font-weight: 600; color: var(--primary); margin-bottom: 10px; }
    .step-desc { font-size: 0.88rem; color: var(--text-muted); line-height: 1.8; }

    /* â”€â”€ ABOUT â”€â”€ */
    #about { background: var(--bg-soft); }
    .about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 104px; align-items: center; }
    @media (max-width: 800px) { .about-grid { grid-template-columns: 1fr; gap: 52px; } }
    .about-text p { font-size: 0.95rem; color: var(--text-muted); line-height: 1.88; margin-bottom: 20px; }
    .about-text p:last-child { margin-bottom: 0; }
    .about-visual { background: var(--bg); border: 1px solid var(--border-light); border-radius: 20px; padding: 44px 48px; font-family: var(--font-mono); font-size: 0.83rem; color: var(--text-muted); line-height: 2.15; }
    .about-visual .kw { color: var(--primary); font-weight: 700; }
    .about-visual .str { color: #2a7a4b; }

    /* â”€â”€ FAQ â”€â”€ */
    .faq-list { max-width: 720px; }
    .faq-item { border-top: 1px solid var(--border-light); }
    .faq-item:last-child { border-bottom: 1px solid var(--border-light); }
    .faq-q { width: 100%; background: none; border: none; text-align: left; font-family: var(--font-body); font-size: 0.97rem; font-weight: 500; color: var(--primary); padding: 26px 0; cursor: pointer; display: flex; justify-content: space-between; align-items: center; gap: 24px; transition: color var(--transition); }
    .faq-q:hover { color: var(--primary-h); }
    .faq-arrow { font-size: 0.74rem; transition: transform 0.28s ease; flex-shrink: 0; color: var(--text-muted); }
    .faq-item.open .faq-arrow { transform: rotate(180deg); }
    .faq-a { font-size: 0.9rem; color: var(--text-muted); line-height: 1.82; max-height: 0; overflow: hidden; transition: max-height 0.32s ease, padding-bottom 0.32s ease; }
    .faq-item.open .faq-a { max-height: 300px; padding-bottom: 26px; }

    /* â”€â”€ CTA â”€â”€ */
    .cta-band { background: var(--primary); text-align: center; padding: clamp(88px, 10vw, 136px) var(--side-pad); }
    .cta-band h2 { font-size: clamp(1.7rem, 3.2vw, 2.7rem); font-weight: 700; color: #fff; letter-spacing: -0.028em; margin-bottom: 16px; }
    .cta-band p { color: rgba(255,255,255,0.44); font-size: 0.97rem; margin-bottom: 44px; }
    .btn-white { font-family: var(--font-body); font-size: 0.9rem; font-weight: 600; padding: 17px 44px; background: #fff; color: var(--primary); border: none; border-radius: var(--radius); cursor: pointer; transition: opacity var(--transition), transform var(--transition); }
    .btn-white:hover { opacity: 0.87; transform: translateY(-1px); }

    /* â”€â”€ FOOTER â”€â”€ */
    footer { background: var(--bg-soft); border-top: 1px solid var(--border-light); }
    .footer-inner { max-width: var(--max-w); margin: 0 auto; padding: 52px var(--side-pad); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; }
    .footer-brand { font-family: var(--font-mono); font-weight: 700; font-size: 1.05rem; color: var(--primary); }
    .footer-brand span { color: var(--text-muted); }
    .footer-links { display: flex; gap: 4px; }
    .footer-links a { font-size: 0.82rem; color: var(--text-muted); text-decoration: none; padding: 7px 14px; border-radius: 8px; transition: color var(--transition), background var(--transition); }
    .footer-links a:hover { color: var(--primary); background: var(--border-light); }
    .footer-copy { font-size: 0.75rem; color: var(--text-muted); width: 100%; text-align: center; margin-top: 4px; border-top: 1px solid var(--border-light); padding-top: 26px; }

    @media (max-width: 600px) {
      .nav-links a { padding: 6px 10px; font-size: 0.76rem; }
      .input-row { flex-direction: column; }
      .shortener-box { padding: 28px 24px; }
    }
  </style>
</head>
<body>

<!-- REDIRECT OVERLAY -->
<div id="redirect-overlay">
  <div class="redir-logo">snip<span>.</span></div>
  <div class="redir-bar" id="redir-bar"></div>
  <div class="redir-msg" id="redir-msg">Decoding your linkâ€¦</div>
  <div class="redir-dest" id="redir-dest"></div>
</div>

<!-- HEADER -->
<header>
  <div class="nav-inner">
    <a href="#home" class="nav-logo">snip<span>.</span></a>
    <nav class="nav-links">
      <a href="#how-to-use">How to Use</a>
      <a href="#features">Features</a>
      <a href="#about">About</a>
      <a href="#faq">FAQ</a>
    </nav>
    <div class="nav-right"></div>
  </div>
</header>

<!-- HERO -->
<section id="home">
  <div class="hero-wrap">
    <span class="hero-badge">works online â€” no server needed</span>
    <h1 class="hero-h1">Make your links<br /><em>impossibly short</em></h1>
    <p class="hero-sub">Paste any URL with https://, get a compact shareable link that works anywhere, for anyone, instantly.</p>
    <div class="shortener-wrap">
      <div class="shortener-box">
        <div class="input-row">
          <input class="url-input" id="urlInput" type="url"
            placeholder="https://your-very-long-link.com/goes/here"
            autocomplete="off" spellcheck="false" />
          <button class="btn-primary" onclick="shortenLink()">Shorten â†’</button>
        </div>
        <p class="error-msg" id="errorMsg">Please enter a valid URL starting with https://</p>
        <div class="result-area" id="resultArea">
          <div class="result-row">
            <a class="result-link" id="resultLink" href="#" target="_blank" rel="noopener noreferrer"></a>
            <button class="btn-copy" id="copyBtn" onclick="copyLink()">Copy</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- STATS -->
<div class="stats-outer">
  <div class="stats-bar">
    <div class="stat"><span class="stat-num" id="statLinks">0</span><span class="stat-label">Links Shortened</span></div>
    <div class="stat"><span class="stat-num">100%</span><span class="stat-label">Free Forever</span></div>
    <div class="stat"><span class="stat-num">Anyone</span><span class="stat-label">Can Open Links</span></div>
  </div>
</div>

<!-- FEATURES -->
<div id="features">
  <div class="section-shell">
    <span class="section-tag">Features</span>
    <h2 class="section-title">Everything you need,<br />nothing you don't.</h2>
    <p class="section-sub">Built lean. No accounts, no tracking, no bloat. Links work online for anyone, no server required.</p>
    <div class="features-grid">
      <div class="feature-card"><span class="feature-icon">âš¡</span><div class="feature-name">Instant Generation</div><p class="feature-desc">Links are generated in milliseconds â€” entirely in your browser, no round trips.</p></div>
      <div class="feature-card"><span class="feature-icon">ğŸŒ</span><div class="feature-name">Works for Anyone</div><p class="feature-desc">Short links work on any device, any browser, anywhere in the world. No account needed to open them.</p></div>
      <div class="feature-card"><span class="feature-icon">ğŸ”’</span><div class="feature-name">Privacy First</div><p class="feature-desc">No data sent to any server. The destination URL is encoded directly into the link itself.</p></div>
      <div class="feature-card"><span class="feature-icon">ğŸ“‹</span><div class="feature-name">One-click Copy</div><p class="feature-desc">Copy your shortened link to clipboard instantly with a single click.</p></div>
      <div class="feature-card"><span class="feature-icon">ğŸŒ</span><div class="feature-name">All HTTPS Links</div><p class="feature-desc">Works with any valid URL â€” social, docs, videos, images, files, and more.</p></div>
      <div class="feature-card"><span class="feature-icon">ğŸ¨</span><div class="feature-name">Minimal Design</div><p class="feature-desc">A focused, distraction-free interface designed for efficiency and clarity.</p></div>
    </div>
  </div>
</div>

<!-- HOW TO USE -->
<section id="how-to-use">
  <div class="section-shell">
    <span class="section-tag">How to Use</span>
    <h2 class="section-title">Three steps.<br />That's it.</h2>
    <p class="section-sub">No signup. No configuration. Open the page and go.</p>
    <div class="steps">
      <div class="step">
        <span class="step-num">Step 01</span>
        <div class="step-title">Paste your URL</div>
        <p class="step-desc">Copy any long URL starting with <code style="font-family:var(--font-mono);font-size:0.82em;background:var(--bg-soft);padding:2px 6px;border-radius:4px;">https://</code> and paste it into the input field above.</p>
      </div>
      <div class="step">
        <span class="step-num">Step 02</span>
        <div class="step-title">Click Shorten</div>
        <p class="step-desc">Hit the Shorten button. Your compact link is generated instantly â€” the destination is encoded right into the URL.</p>
      </div>
      <div class="step">
        <span class="step-num">Step 03</span>
        <div class="step-title">Copy & Share</div>
        <p class="step-desc">Share your short link with anyone. When they open it, they'll be instantly redirected â€” no server, no account needed.</p>
      </div>
      <div class="step">
        <span class="step-num">How it works</span>
        <div class="step-title">Self-contained Links</div>
        <p class="step-desc">The original URL is encoded into the short link itself using Base64. Opening the link decodes and redirects â€” works everywhere online.</p>
      </div>
    </div>
  </div>
</section>

<!-- ABOUT -->
<div id="about">
  <div class="section-shell">
    <div class="about-grid">
      <div class="about-text">
        <span class="section-tag">About</span>
        <h2 class="section-title">Built with one rule:<br />keep it simple.</h2>
        <p>Snip was born out of frustration with bloated link shorteners that require accounts, show ads, and harvest your data.</p>
        <p>We believe a link shortener should do one thing well: shorten links. Everything else is noise.</p>
        <p>Snip encodes the destination directly into the short link â€” no server, no database, no accounts. It just works.</p>
      </div>
      <div class="about-visual">
        <span><span class="kw">const</span> snip = {</span><br />
        &nbsp;&nbsp;backend:&nbsp;&nbsp;<span class="str">"none"</span>,<br />
        &nbsp;&nbsp;tracking:&nbsp;<span class="str">"zero"</span>,<br />
        &nbsp;&nbsp;accounts:&nbsp;<span class="str">"nope"</span>,<br />
        &nbsp;&nbsp;ads:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="str">"never"</span>,<br />
        &nbsp;&nbsp;method:&nbsp;&nbsp;&nbsp;<span class="str">"base64"</span>,<br />
        &nbsp;&nbsp;works:&nbsp;&nbsp;&nbsp;&nbsp;<span class="str">"anywhere"</span><br />
        };
      </div>
    </div>
  </div>
</div>

<!-- FAQ -->
<section id="faq">
  <div class="section-shell">
    <span class="section-tag">FAQ</span>
    <h2 class="section-title">Frequently asked.</h2>
    <p class="section-sub">Got a question? We've probably got an answer.</p>
    <div class="faq-list">
      <div class="faq-item">
        <button class="faq-q" onclick="toggleFaq(this)">How does the short link work without a server? <span class="faq-arrow">â–¼</span></button>
        <div class="faq-a">The original URL is encoded using Base64 and stored directly in the short link's query parameter. When someone opens the link, the page decodes it and immediately redirects â€” no server lookup needed.</div>
      </div>
      <div class="faq-item">
        <button class="faq-q" onclick="toggleFaq(this)">Can anyone open my short links? <span class="faq-arrow">â–¼</span></button>
        <div class="faq-a">Yes! Since the destination is encoded in the URL itself, anyone on any device can open your short link and get redirected. No account, no browser restriction.</div>
      </div>
      <div class="faq-item">
        <button class="faq-q" onclick="toggleFaq(this)">Do short links expire? <span class="faq-arrow">â–¼</span></button>
        <div class="faq-a">No. Since the destination is baked into the URL, the link works as long as the page is hosted online. There's nothing to expire.</div>
      </div>
      <div class="faq-item">
        <button class="faq-q" onclick="toggleFaq(this)">Why does the URL need to start with https://? <span class="faq-arrow">â–¼</span></button>
        <div class="faq-a">We enforce HTTPS to ensure you're only shortening secure links. This protects you and anyone you share links with.</div>
      </div>
      <div class="faq-item">
        <button class="faq-q" onclick="toggleFaq(this)">Are the links truly private? <span class="faq-arrow">â–¼</span></button>
        <div class="faq-a">The destination URL is visible inside the short link if decoded. If you need truly private links, this tool isn't designed for that â€” but no third party server ever sees your data.</div>
      </div>
      <div class="faq-item">
        <button class="faq-q" onclick="toggleFaq(this)">Is this really free? No catch? <span class="faq-arrow">â–¼</span></button>
        <div class="faq-a">Yes â€” 100% free. No premium tier, no ads, no data monetization. Just a simple HTML file.</div>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<div class="cta-band">
  <h2>Ready to snip your first link?</h2>
  <p>Scroll back up and paste your URL. No signup. No wait.</p>
  <button class="btn-white" onclick="window.scrollTo({top:0,behavior:'smooth'})">Get Started â†’</button>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-brand">snip<span>.</span></div>
    <div class="footer-links">
      <a href="privacy.html">Privacy Policy</a>
      <a href="terms.html">Terms of Service</a>
    </div>
    <p class="footer-copy">Â© 2025 Snip. No rights reserved. No data collected. No servers harmed.</p>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function () {

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // HOW IT WORKS:
  // The full destination URL is Base64-encoded and
  // stored directly in the ?r= query param.
  // This means the short link is self-contained and
  // works online for ANYONE â€” no server, no localStorage.
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  function encodeURL(url) {
    // btoa needs latin1 â€” use encodeURIComponent first to handle unicode
    return btoa(encodeURIComponent(url));
  }

  function decodeURL(encoded) {
    return decodeURIComponent(atob(encoded));
  }

  // â”€â”€ CHECK FOR REDIRECT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const params = new URLSearchParams(window.location.search);
  const code   = params.get('r');

  if (code) {
    const overlay = document.getElementById('redirect-overlay');
    const msg     = document.getElementById('redir-msg');
    const dest    = document.getElementById('redir-dest');
    const bar     = document.getElementById('redir-bar');
    overlay.classList.add('active');

    try {
      const destination = decodeURL(code);

      // Validate it looks like a real URL
      if (!destination.startsWith('http://') && !destination.startsWith('https://')) {
        throw new Error('Invalid URL');
      }

      dest.textContent = destination;
      dest.classList.add('show');
      msg.textContent = 'Redirecting you nowâ€¦';

      setTimeout(function () {
        window.location.replace(destination);
      }, 700);

    } catch (e) {
      bar.style.display = 'none';
      msg.innerHTML =
        '<strong style="color:#b83232;display:block;margin-bottom:8px;">Invalid or corrupted link.</strong>' +
        'This short link could not be decoded.<br><br>' +
        '<a href="' + window.location.href.split('?')[0] + '" ' +
        'style="color:var(--primary);font-weight:600;text-decoration:none;border-bottom:1px solid currentColor;">' +
        'â† Back to Snip</a>';
    }
    return; // Stop â€” don't init the rest of the page
  }

  // â”€â”€ NORMAL PAGE INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  // Base URL = this page's URL (works whether local or hosted online)
  const BASE = window.location.href.split('?')[0].split('#')[0] + '?r=';

  function updateStat() {
    try {
      const map = JSON.parse(localStorage.getItem('snip_stat') || '0');
      document.getElementById('statLinks').textContent = map;
    } catch { document.getElementById('statLinks').textContent = '0'; }
  }

  function bumpStat() {
    try {
      const n = parseInt(localStorage.getItem('snip_stat') || '0', 10) + 1;
      localStorage.setItem('snip_stat', n);
      document.getElementById('statLinks').textContent = n;
    } catch {}
  }

  window.shortenLink = function () {
    const input      = document.getElementById('urlInput');
    const errorMsg   = document.getElementById('errorMsg');
    const resultArea = document.getElementById('resultArea');
    const resultLink = document.getElementById('resultLink');
    const copyBtn    = document.getElementById('copyBtn');
    const url        = input.value.trim();

    errorMsg.classList.remove('show');
    resultArea.classList.remove('show');

    if (!url.startsWith('https://') || url.length < 12) {
      errorMsg.classList.add('show');
      input.focus();
      return;
    }

    // Encode the URL directly into the short link
    const encoded  = encodeURL(url);
    const shortUrl = BASE + encoded;

    resultLink.textContent = shortUrl;
    resultLink.href        = shortUrl;
    resultArea.classList.add('show');
    copyBtn.textContent = 'Copy';
    copyBtn.classList.remove('copied');
    bumpStat();
  };

  window.copyLink = function () {
    const link = document.getElementById('resultLink').textContent;
    navigator.clipboard.writeText(link).then(function () {
      const btn = document.getElementById('copyBtn');
      btn.textContent = 'Copied!';
      btn.classList.add('copied');
      setTimeout(function () {
        btn.textContent = 'Copy';
        btn.classList.remove('copied');
      }, 2000);
    });
  };

  window.toggleFaq = function (btn) {
    const item    = btn.closest('.faq-item');
    const wasOpen = item.classList.contains('open');
    document.querySelectorAll('.faq-item.open').forEach(function (i) { i.classList.remove('open'); });
    if (!wasOpen) item.classList.add('open');
  };

  document.getElementById('urlInput').addEventListener('keydown', function (e) {
    if (e.key === 'Enter') window.shortenLink();
  });

  updateStat();
});
</script>
</body>
</html>